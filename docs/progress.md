# 개발 진행 상황 (Development Progress)

**최종 업데이트**: 2026-02-02
**현재 Phase**: Phase 1 (MVP)
**전체 진행률**: 20% (10주 중 2주 완료)

---

## 현재 상태

### 완료된 작업
- [x] 프로젝트 구조 생성 (디렉토리 구조)
- [x] CLAUDE.md 작성 (프로젝트 가이드)
- [x] 개발 계획 문서 작성 (plan.md)
- [x] 진행 상황 추적 문서 작성 (progress.md)
- [x] **Collector 메트릭 수집기 개발 완료**
  - [x] CPU 메트릭 수집 모듈 (usage, cores, load average)
  - [x] 메모리 메트릭 수집 모듈 (RAM, swap)
  - [x] 디스크 메트릭 수집 모듈 (usage, I/O, inodes)
  - [x] 네트워크 메트릭 수집 모듈 (interfaces, I/O, connections)
  - [x] 설정 파일 구조 정의 (YAML)
  - [x] 환경변수 지원
  - [x] 메트릭 수집 스케줄러 구현 (5초 간격)
  - [x] HTTPS API 전송 모듈
  - [x] 네트워크 장애 대비 로컬 버퍼링
  - [x] 우아한 종료 (graceful shutdown)
  - [x] 수집기 단위 테스트 작성
  - [x] Python 의존성 파일 (requirements.txt)

### 진행 중인 작업
- [ ] Collector 성능 검증 및 테스트
  - CPU 오버헤드 < 5% 확인
  - 메모리 사용량 < 100MB 확인
  - 실제 환경에서 테스트

### 다음 작업
- Week 3 태스크: API 서버 및 데이터베이스 연동 개발

---

## Phase별 진행 현황

### Phase 1: MVP (Week 1-4)
**목표**: 기본적인 CPU/메모리 모니터링 시스템 구축
**진행률**: 50% (Week 1-2 완료, Week 3-4 남음)
**상태**: 진행 중

#### Week 1-2: 메트릭 수집기 개발 ✅ **완료**
**진행률**: 95% (성능 테스트만 남음)
- [x] 프로젝트 구조 설정 및 환경 구성
- [x] psutil 기반 CPU 메트릭 수집 모듈 개발
  - CPU 전체/코어별 사용률
  - 로드 평균 (1m, 5m, 15m)
  - iowait 지원 (Linux)
- [x] 메모리 메트릭 수집 모듈 개발
  - 메모리 사용량 (total, used, available, free)
  - 버퍼/캐시 메모리 (Linux)
  - Swap 메모리
- [x] 디스크 메트릭 수집 모듈 개발 (예정보다 빠름)
  - 디스크 사용량 (파티션별)
  - 디스크 I/O (read/write bytes, IOPS)
  - Inode 사용률 (Unix-like)
- [x] 네트워크 메트릭 수집 모듈 개발 (예정보다 빠름)
  - 인터페이스별 I/O (bytes, packets)
  - 에러 및 드롭 카운트
  - TCP/UDP 연결 상태
- [x] 수집기 설정 파일 구조 정의 (YAML)
- [x] 환경변수 지원 (${VAR_NAME} 패턴)
- [x] 메트릭 수집 스케줄러 구현 (schedule 라이브러리)
- [x] HTTPS API 전송 모듈 개발
- [x] 네트워크 장애 대비 로컬 버퍼링
- [x] 버퍼 관리 (최대 크기, 자동 정리)
- [x] 우아한 종료 (SIGINT/SIGTERM 핸들링)
- [x] 로깅 시스템 (파일 + 콘솔, 로테이션)
- [x] 수집기 단위 테스트 작성 (pytest)
- [ ] 성능 검증 (< 5% CPU, < 100MB 메모리) - **실제 테스트 필요**

**주요 성과**:
- 계획보다 빠르게 디스크/네트워크 메트릭까지 완료 (원래 Week 5-6 예정)
- 크로스 플랫폼 지원 (Linux, Windows, macOS)
- 견고한 에러 처리 및 버퍼링 메커니즘

#### Week 3: API 서버 및 데이터베이스 ⏳ **다음 작업**
**진행률**: 0%
- [ ] FastAPI 프로젝트 구조 설정
- [ ] InfluxDB 2.x 설치 및 스키마 정의
- [ ] PostgreSQL 설치 및 메타데이터 테이블 설계
- [ ] 메트릭 수집 엔드포인트 구현 (`POST /api/v1/metrics/collect`)
- [ ] 현재 메트릭 조회 엔드포인트 (`GET /api/v1/metrics/current`)
- [ ] 시계열 데이터 조회 엔드포인트 (`GET /api/v1/metrics/history`)
- [ ] JWT/API Key 인증 미들웨어 구현
- [ ] Rate Limiting 구현 (100 req/min per collector)
- [ ] API 엔드포인트 테스트 작성

#### Week 4: 대시보드 및 알림 ⏳ **대기 중**
**진행률**: 0%
- [ ] Grafana 설치 및 InfluxDB 데이터소스 연결
- [ ] CPU 메트릭 대시보드 패널 생성
- [ ] 메모리 메트릭 대시보드 패널 생성
- [ ] Alert Manager 기본 구조 구현
- [ ] 임계값 기반 알림 평가 엔진
- [ ] 기본 알림 규칙 설정
- [ ] Slack 알림 채널 연동
- [ ] MVP 통합 테스트

### Phase 2: 기능 확장 (Week 5-8)
**목표**: 고급 알림 기능 및 대시보드 개선
**진행률**: 50% (디스크/네트워크 메트릭이 Phase 1에서 완료됨)
**상태**: 일부 선행 완료

**노트**:
- Week 5-6의 디스크/네트워크 메트릭은 이미 Week 1-2에서 완료됨
- Week 7-8의 고급 알림 및 대시보드 개선 작업만 남음

#### Week 5-6: 디스크/네트워크 메트릭 ✅ **선행 완료**
- [x] 디스크 메트릭 (Week 1-2에서 완료)
- [x] 네트워크 메트릭 (Week 1-2에서 완료)

#### Week 7: 고급 알림 규칙 ⏳ **대기 중**
- [ ] 알림 규칙 CRUD API
- [ ] 복합 조건 알림 규칙
- [ ] Email/Webhook 알림 채널

#### Week 8: 대시보드 개선 ⏳ **대기 중**
- [ ] 시간 범위 선택 기능
- [ ] 대시보드 최적화

### Phase 3: 최적화 (Week 9-10)
**목표**: 성능 튜닝 및 프로덕션 배포 준비
**진행률**: 0%
**상태**: 대기 중

---

## 주요 마일스톤

| 마일스톤 | 목표일 | 상태 | 완료일 |
|----------|--------|------|--------|
| 프로젝트 구조 생성 | Week 1 | ✅ 완료 | 2026-02-02 |
| CPU/메모리 수집기 완성 | Week 2 | ✅ 완료 | 2026-02-02 |
| **전체 메트릭 수집 완성** | **Week 2** | **✅ 완료** | **2026-02-02** |
| API 서버 MVP 완성 | Week 3 | ⏳ 진행 예정 | - |
| 기본 대시보드 및 알림 | Week 4 | ⏳ 대기 | - |
| **MVP 완성** | **Week 4 말** | **⏳ 대기** | **-** |
| 고급 알림 시스템 | Week 7 | ⏳ 대기 | - |
| 대시보드 개선 | Week 8 | ⏳ 대기 | - |
| **프로덕션 배포 준비** | **Week 10** | **⏳ 대기** | **-** |

**주요 성과**: 디스크/네트워크 메트릭을 계획보다 4주 앞당겨 완료 (Week 6 → Week 2)

---

## 주간 업데이트

### Week 1-2 (2026-02-02) ✅ **완료**
**목표**: 메트릭 수집기 완성
**달성률**: 95% (성능 테스트 제외)

**완료한 작업**:
- ✅ 프로젝트 디렉토리 구조 생성
- ✅ CLAUDE.md 작성 (프로젝트 가이드 문서)
- ✅ plan.md 및 progress.md 작성 (개발 계획 및 진행 상황)
- ✅ **Collector 개발 완료** (Python 기반):
  - ✅ CPU 메트릭 수집 (usage, per-core, load average, iowait)
  - ✅ 메모리 메트릭 수집 (RAM, swap, buffers, cached)
  - ✅ 디스크 메트릭 수집 (usage, I/O, inodes) - **계획보다 4주 빠름**
  - ✅ 네트워크 메트릭 수집 (interfaces, I/O, connections) - **계획보다 4주 빠름**
  - ✅ YAML 설정 시스템 (환경변수 지원, 검증)
  - ✅ API 전송 모듈 (HTTPS, Bearer token 인증)
  - ✅ 로컬 버퍼링 (네트워크 장애 대비, 최대 1000개 메트릭)
  - ✅ 스케줄러 (5초 간격, 디스크는 30초)
  - ✅ 우아한 종료 (SIGINT/SIGTERM 핸들링)
  - ✅ 로깅 시스템 (파일 로테이션, 레벨별 필터링)
  - ✅ 단위 테스트 (pytest, 7개 테스트)
  - ✅ requirements.txt (psutil, PyYAML, requests, schedule)

**완료된 파일 목록**:
```
collector/
├── src/
│   ├── main.py                    # 메인 진입점, 스케줄러, 시그널 핸들러
│   ├── metrics_collector.py       # 전체 메트릭 수집 로직 (CPU/메모리/디스크/네트워크)
│   ├── config.py                  # YAML 설정 로더, 환경변수 치환
│   ├── metrics_sender.py          # HTTPS API 전송, 로컬 버퍼링
│   └── __init__.py
├── tests/
│   ├── test_metrics_collector.py  # 메트릭 수집 단위 테스트
│   └── __init__.py
├── config/
│   └── collector-config.yaml      # 설정 템플릿 (interval, API endpoint, 메트릭 활성화)
└── requirements.txt               # Python 의존성 패키지
```

**기술 스택**:
- Python 3.9+
- psutil (시스템 메트릭 수집)
- PyYAML (설정 파일)
- requests (HTTP 클라이언트)
- schedule (작업 스케줄링)
- pytest (단위 테스트)

**남은 작업**:
- ⏳ 실제 환경에서 성능 테스트 (CPU < 5%, 메모리 < 100MB)
- ⏳ 장기 실행 안정성 테스트 (24시간 이상)

**블로커**:
- 없음 (API 서버가 없어 실제 전송 테스트는 Week 3 이후 가능)

**주요 성과**:
- Phase 2의 디스크/네트워크 메트릭을 Week 1-2에 선행 완료 → **전체 일정 4주 단축**
- 크로스 플랫폼 지원 (Linux, Windows, macOS)
- 견고한 에러 처리 및 네트워크 장애 복구 메커니즘

**다음 주 계획** (Week 3):
1. FastAPI 기반 API 서버 개발
2. InfluxDB 2.x 설치 및 스키마 정의
3. PostgreSQL 설치 및 메타데이터 테이블 설계
4. 메트릭 수집 엔드포인트 구현 (`POST /api/v1/metrics/collect`)
5. 현재/이력 메트릭 조회 엔드포인트 구현
6. JWT/API Key 인증 미들웨어 구현
7. Rate Limiting 구현 (100 req/min per collector)
8. API 엔드포인트 테스트 작성

---

## 기술적 결정 사항

| 날짜 | 항목 | 결정 내용 | 이유 |
|------|------|-----------|------|
| 2026-02-02 | 시계열 DB | InfluxDB 2.x | 시계열 데이터 최적화, 쿼리 성능 |
| 2026-02-02 | 메타데이터 DB | PostgreSQL | 신뢰성, 관계형 데이터 |
| 2026-02-02 | 대시보드 | Grafana | InfluxDB 통합, 커스터마이징 용이 |
| 2026-02-02 | API 프레임워크 | FastAPI | 성능, 자동 문서화, 타입 안정성 |
| 2026-02-02 | Collector 언어 | Python 3.9+ | psutil 지원, 크로스 플랫폼 |
| 2026-02-02 | 스케줄러 | schedule 라이브러리 | 간단한 API, 충분한 기능 |
| 2026-02-02 | 설정 형식 | YAML | 가독성, 환경변수 지원 |
| 2026-02-02 | 버퍼링 형식 | JSON 파일 | 디버깅 용이, 별도 DB 불필요 |
| 2026-02-02 | HTTP 클라이언트 | requests | 안정성, 널리 사용됨 |
| 2026-02-02 | 테스트 프레임워크 | pytest | 강력한 기능, 간단한 문법 |

---

## 이슈 및 해결

### 열린 이슈
1. **Collector 성능 검증 미완료**
   - 상태: Open
   - 우선순위: Medium
   - 설명: 실제 환경에서 CPU/메모리 오버헤드 측정 필요
   - 액션: Week 3에서 API 서버 구축 후 통합 테스트

2. **API 서버 미구축**
   - 상태: Open
   - 우선순위: High
   - 설명: Collector가 전송할 API 서버 필요
   - 액션: Week 3 작업 예정

### 해결된 이슈
_없음_

---

## 성능 메트릭

| 메트릭 | 목표 | 현재 | 상태 | 측정일 |
|--------|------|------|------|--------|
| 수집기 CPU 사용률 | < 5% | 미측정 | ⏳ 테스트 필요 | - |
| 수집기 메모리 사용량 | < 100MB | 미측정 | ⏳ 테스트 필요 | - |
| 메트릭 수집 지연 | < 1초 | ~1-1.5초 | ⚠️ 확인 필요 | 2026-02-02 |
| 수집 성공률 | > 99.9% | 미측정 | ⏳ API 서버 필요 | - |
| API 쿼리 지연 (현재) | < 200ms | - | ⏳ API 서버 미구축 | - |
| API 쿼리 지연 (24h) | < 1초 | - | ⏳ API 서버 미구축 | - |
| 대시보드 로딩 | < 2초 | - | ⏳ 대시보드 미구축 | - |

**주의사항**:
- 메트릭 수집 지연: CPU 메트릭 수집 시 `psutil.cpu_times_percent(interval=1)` 때문에 1초 지연 발생
- 실제 성능 테스트는 API 서버 구축 후 진행 예정

---

## 팀 노트

### 배운 점
- 프로젝트 초기 구조 설계의 중요성
- 문서화를 통한 명확한 목표 설정
- psutil을 사용한 크로스 플랫폼 메트릭 수집의 효율성
- 로컬 버퍼링을 통한 네트워크 장애 대비의 중요성
- 단위 테스트 작성으로 코드 품질 보장

### 개선할 점
- 주간 업데이트를 규칙적으로 진행
- 코드 리뷰 프로세스 확립 필요
- 성능 테스트를 더 일찍 수행 (Week 3 전에)
- API 서버를 병렬로 개발했다면 더 빠른 통합 테스트 가능

### 예상보다 빠른 진행
- 디스크/네트워크 메트릭을 Week 5-6이 아닌 Week 1-2에 완료
- 이유: psutil 라이브러리가 모든 메트릭을 통일된 API로 제공하여 구현이 단순함
- 영향: Phase 2의 Week 5-6 작업이 불필요해짐, 전체 일정 단축 가능

---

## 다음 체크포인트

**날짜**: 2026-02-09 (Week 3 시작)
**점검 항목**:
- [x] CPU 메트릭 수집 모듈 완성도 - ✅ 완료
- [x] 메모리 메트릭 수집 모듈 완성도 - ✅ 완료
- [x] 설정 파일 구조 확정 - ✅ 완료
- [x] 단위 테스트 커버리지 - ✅ 완료
- [ ] Collector 성능 검증 - ⏳ 대기
- [ ] API 서버 구조 설계 - ⏳ Week 3 작업
- [ ] 데이터베이스 스키마 정의 - ⏳ Week 3 작업

**Week 3 목표**:
- FastAPI 기반 API 서버 구축
- InfluxDB/PostgreSQL 연동
- 메트릭 수집 엔드포인트 구현
- Collector와 API 서버 통합 테스트

---

---

## 코드 통계

### Collector (Week 1-2)
- **총 코드 라인**: ~1,200 줄 (Python)
- **주요 모듈**:
  - `main.py`: ~210 줄 (메인 진입점, 스케줄러, 시그널 핸들링)
  - `metrics_collector.py`: ~330 줄 (메트릭 수집 로직 - CPU/메모리/디스크/네트워크)
  - `metrics_sender.py`: ~200 줄 (API 전송, 로컬 버퍼링)
  - `config.py`: ~175 줄 (설정 로더, 환경변수 치환)
  - `test_metrics_collector.py`: ~200 줄 (단위 테스트 - 7개 테스트 케이스)
- **설정 파일**: `collector-config.yaml` (~65 줄)
- **의존성**: 5개 패키지 (psutil, PyYAML, requests, schedule, pytest)
- **테스트 커버리지**: 주요 메트릭 수집 함수 테스트 완료 (CPU, 메모리, 디스크, 네트워크)
- **크로스 플랫폼 지원**: Linux, Windows, macOS

### 전체 프로젝트 구조
```
module-3/
├── collector/          ✅ 완료 (Week 1-2)
├── api-server/         ⏳ Week 3 예정
├── alert-manager/      ⏳ Week 4 예정
├── dashboard/          ⏳ Week 4 예정
├── database/           ⏳ Week 3 예정
├── scripts/            ⏳ Week 10 예정
├── tests/integration/  ⏳ Week 9 예정
└── docs/               ✅ 완료 (계획 문서)
```

---

_이 문서는 매주 업데이트됩니다. 마지막 업데이트: 2026-02-02_
